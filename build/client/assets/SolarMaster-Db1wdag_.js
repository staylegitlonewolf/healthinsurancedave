import{w as B,t as F,q as H,a,p as e}from"./chunk-ZYFC6VSF-D5W72s7n.js";const O=()=>{const[d,N]=a.useState(!1);return a.useEffect(()=>{const f=()=>{const b=navigator.userAgent,E=/iPhone|iPod/.test(b),s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(b);N(E||s)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),{isMobile:d}},G=()=>{var y,P,I;const d=F(),N=H(),{isMobile:f}=O(),b=a.useRef(null),E=a.useRef(null),s=(y=N.state)==null?void 0:y.partnerData,M=(P=N.state)==null?void 0:P.returnPath,C=(I=N.state)==null?void 0:I.partnerId,[Z,X]=a.useState(!1);a.useEffect(()=>{if(X(!0),!s){d("/discover",{replace:!0});return}},[s,d]);const[n,x]=a.useState({scale:.7,isZoomed:!1,position:{x:0,y:0}}),[k,w]=a.useState(!1),[L,p]=a.useState(!1),S={scale:.7,isZoomed:!1,position:{x:0,y:0}};a.useEffect(()=>{window.scrollTo(0,0)},[]),a.useEffect(()=>{s&&window.scrollTo(0,0)},[s]),a.useEffect(()=>{if(E.current){const{scale:t,position:o}=n;E.current.style.transform=`scale(${t}) translate(${o.x}px, ${o.y}px)`}},[n]);const T=a.useCallback(t=>{k||L||x(o=>o.isZoomed?S:{scale:2,isZoomed:!0,position:o.position})},[k,L]),R=a.useCallback(t=>{t.preventDefault(),x(S)},[]),D=a.useCallback(t=>{t.preventDefault();const o=t.deltaY>0?-.1:.1,c=Math.max(.5,Math.min(5,n.scale+o));x(u=>({...u,scale:c,isZoomed:c>1}))},[n.scale]);a.useEffect(()=>{const t=b.current;if(t&&!f)return t.addEventListener("wheel",D,{passive:!1}),()=>t.removeEventListener("wheel",D)},[D,f]);const z=a.useCallback(t=>{if(n.isZoomed){t.preventDefault(),w(!0),p(!1);const o=t.clientX,c=t.clientY,u=n.position.x,g=n.position.y,h=l=>{l.preventDefault();const r=l.clientX-o,v=l.clientY-c;Math.sqrt(r*r+v*v)>5&&p(!0),x(m=>({...m,position:{x:u+r,y:g+v}}))},i=()=>{setTimeout(()=>{w(!1),p(!1)},10),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",i)}},[n.isZoomed,n.position]),A=a.useCallback(t=>{if(n.isZoomed&&t.touches.length===1){w(!0),p(!1);const o=t.touches[0],c=o.clientX,u=o.clientY,g=n.position.x,h=n.position.y,i=r=>{if(r.touches.length===1){r.preventDefault();const v=r.touches[0],j=v.clientX-c,m=v.clientY-u;Math.sqrt(j*j+m*m)>5&&p(!0),x(q=>({...q,position:{x:g+j,y:h+m}}))}},l=()=>{setTimeout(()=>{w(!1),p(!1)},10),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",l)};document.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("touchend",l)}else if(t.touches.length===2){const o=t.touches[0],c=t.touches[1],u=Math.hypot(c.clientX-o.clientX,c.clientY-o.clientY),g=i=>{if(i.touches.length===2){i.preventDefault();const l=i.touches[0],r=i.touches[1],j=Math.hypot(r.clientX-l.clientX,r.clientY-l.clientY)/u,m=Math.max(.5,Math.min(5,n.scale*j));x(Y=>({...Y,scale:m,isZoomed:m>1}))}},h=()=>{document.removeEventListener("touchmove",g),document.removeEventListener("touchend",h)};document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",h)}},[n.isZoomed,n.position,n.scale]),$=a.useCallback(()=>{M&&C?d(M,{state:{scrollToPartner:C,partnerData:s}}):d(-1)},[M,C,s,d]),W=a.useCallback(()=>{s!=null&&s.website&&window.open(s.website,"_blank","noopener,noreferrer")},[s==null?void 0:s.website]);return Z?s?e.jsxs("div",{className:"solar-master-page-container",children:[e.jsx("div",{className:"solar-master-header-spacing"}),e.jsx("div",{className:"solar-master-page-header",children:e.jsx("div",{className:"solar-master-partner-info",children:e.jsxs("div",{className:"solar-master-partner-info-columns",children:[e.jsxs("div",{className:"solar-master-partner-info-left",children:[e.jsx("h2",{children:s.name}),e.jsx("div",{className:"solar-master-partner-title",children:s.title})]}),e.jsxs("div",{className:"solar-master-partner-info-right",children:[e.jsxs("div",{className:"solar-master-partner-status",children:[e.jsx("span",{className:"solar-master-status-label",children:"Status:"}),e.jsx("span",{className:"solar-master-status-value",children:"Active Partner"})]}),s.website&&e.jsxs("button",{className:"solar-master-contact-btn website-btn",onClick:W,children:[e.jsx("i",{className:"fas fa-globe"}),e.jsx("span",{children:"Visit Website"})]})]})]})})}),e.jsx("div",{className:"solar-master-content",children:e.jsxs("div",{className:"solar-master-content-grid",children:[e.jsxs("div",{className:"solar-master-details-section",children:[s.services&&s.services.length>0&&e.jsxs("div",{className:"solar-master-detail-card",children:[e.jsx("h3",{className:"solar-master-detail-title",children:"Services & Solutions"}),e.jsx("div",{className:"solar-master-detail-content",children:e.jsx("ul",{className:"solar-master-detail-list",children:s.services.map((t,o)=>e.jsx("li",{children:t},o))})})]}),s.description&&e.jsxs("div",{className:"solar-master-detail-card",children:[e.jsxs("h3",{className:"solar-master-detail-title",children:["About ",s.name]}),e.jsx("p",{className:"solar-master-detail-content",children:s.description})]})]}),e.jsx("div",{className:"solar-master-image-section",children:s&&s.image?e.jsx(e.Fragment,{children:e.jsx("div",{ref:b,className:`solar-master-image-container ${n.isZoomed?"zoomed":""}`,onClick:T,onDoubleClick:R,onMouseDown:z,onTouchStart:A,children:e.jsx("img",{ref:E,src:s.image,alt:s.name,className:"solar-master-image",style:{width:"100%",height:"100%",objectFit:"contain",maxWidth:"90%",maxHeight:"90%",cursor:n.isZoomed?"grab":"zoom-in"}})})}):e.jsx("div",{className:"solar-master-image-container",children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-secondary)",fontSize:"1.1rem"},children:"No image available"})})})]})}),e.jsxs("button",{onClick:$,className:"solar-master-return-btn",children:[e.jsx("i",{className:"fas fa-arrow-left"}),"Return"]})]}):e.jsx("div",{className:"solar-master-container",children:e.jsxs("div",{className:"solar-master-error",children:[e.jsx("h2",{children:"No solar partner selected"}),e.jsx("button",{onClick:()=>d(-1),className:"solar-return-btn",children:"Go Back"})]})}):e.jsx("div",{className:"solar-master-container",children:e.jsx("div",{className:"solar-master-header",children:e.jsx("div",{className:"solar-partner-info",children:e.jsx("div",{className:"solar-partner-info-columns",children:e.jsxs("div",{className:"solar-partner-info-left",children:[e.jsx("h2",{children:"Loading..."}),e.jsx("div",{className:"solar-partner-title",children:"Loading..."})]})})})})})},V=B(G);export{V as default};
