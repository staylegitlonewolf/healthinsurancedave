import{t as J,q as K,a as o,p as e,w as Q}from"./chunk-ZYFC6VSF-D5W72s7n.js";import{u as ee}from"./iPhone-D5Eiwg7u.js";const te=()=>{var Z,X,R;const g=J(),T=K(),{isMobile:D}=ee(),$=o.useRef(null),u=o.useRef(null),t=(Z=T.state)==null?void 0:Z.certData,L=(X=T.state)==null?void 0:X.returnPath,E=(R=T.state)==null?void 0:R.certId,[C,F]=o.useState(!1);o.useEffect(()=>{if(F(!0),!t){g("/certifications",{replace:!0});return}},[t,g]);const[i,f]=o.useState({scale:.7,isZoomed:!1,position:{x:0,y:0}}),[S,w]=o.useState(!1),[M,b]=o.useState(!1),[P,Y]=o.useState(0),y={scale:.7,isZoomed:!1,position:{x:0,y:0}};o.useEffect(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0})}),setTimeout(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},100)},[]),o.useEffect(()=>{t&&(window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,Y(0),f(y),requestAnimationFrame(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0})}),setTimeout(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},100))},[t]),o.useEffect(()=>{C&&(window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,requestAnimationFrame(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0}),setTimeout(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},200))},[C]);const I=(t==null?void 0:t.galleryImages)||[{src:(t==null?void 0:t.image)||"",caption:`${(t==null?void 0:t.name)||""} License`}],_=I[P],q=o.useCallback(n=>{Y(n),f(y)},[]);o.useEffect(()=>{if(u.current){const{scale:n,position:s}=i;u.current.style.transform=`scale(${n}) translate(${s.x}px, ${s.y}px)`}},[i]);const A=o.useCallback(n=>{S||M||f(s=>s.isZoomed?y:{scale:2,isZoomed:!0,position:s.position})},[S,M]),O=o.useCallback(n=>{n.preventDefault(),f(y)},[]),k=o.useCallback(n=>{n.preventDefault();const s=n.deltaY>0?-.1:.1,a=Math.max(.5,Math.min(5,i.scale+s));f(c=>({...c,scale:a,isZoomed:a>1}))},[i.scale]);o.useEffect(()=>{const n=$.current;if(n&&!D)return n.addEventListener("wheel",k,{passive:!1}),()=>n.removeEventListener("wheel",k)},[k,D]);const U=o.useCallback(n=>{if(i.isZoomed){n.preventDefault(),w(!0),b(!1);const s=n.clientX,a=n.clientY,c=i.position.x,h=i.position.y,l=p=>{p.preventDefault();const m=p.clientX-s,v=p.clientY-a;Math.sqrt(m*m+v*v)>5&&b(!0),f(x=>({...x,position:{x:c+m,y:h+v}}))},d=()=>{setTimeout(()=>{w(!1),b(!1)},10),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",d)}},[i.isZoomed,i.position]),H=o.useCallback(n=>{if(i.isZoomed&&n.touches.length===1){w(!0),b(!1);const s=n.touches[0],a=s.clientX,c=s.clientY,h=i.position.x,l=i.position.y,d=m=>{if(m.touches.length===1){m.preventDefault();const v=m.touches[0],j=v.clientX-a,x=v.clientY-c;Math.sqrt(j*j+x*x)>5&&b(!0),f(B=>({...B,position:{x:h+j,y:l+x}}))}},p=()=>{setTimeout(()=>{w(!1),b(!1)},10),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",p)};document.addEventListener("touchmove",d,{passive:!1}),document.addEventListener("touchend",p)}else if(n.touches.length===2){const s=n.touches[0],a=n.touches[1],c=Math.hypot(a.clientX-s.clientX,a.clientY-s.clientY),h=d=>{if(d.touches.length===2){d.preventDefault();const p=d.touches[0],m=d.touches[1],j=Math.hypot(m.clientX-p.clientX,m.clientY-p.clientY)/c,x=Math.max(.5,Math.min(5,i.scale*j));f(z=>({...z,scale:x,isZoomed:x>1}))}},l=()=>{document.removeEventListener("touchmove",h),document.removeEventListener("touchend",l)};document.addEventListener("touchmove",h,{passive:!1}),document.addEventListener("touchend",l)}},[i.isZoomed,i.position,i.scale]),r=(t==null?void 0:t.licenseData)||{licenseNumber:"-",npn:"-",issueDate:"-",expirationDate:"-"},N={licenseNumber:r.licenseNumber||r.LicenseNumber||"-",npn:r.npn||"-",issueDate:r.issueDate||"-",expirationDate:r.expirationDate||"-"};o.useEffect(()=>{},[t,r,N]);const G=o.useCallback(()=>{L&&E?g(L,{state:{scrollToCert:E,certData:t}}):g(-1)},[L,E,t,g]),V=o.useCallback(()=>{var a;const n=(a=u.current)==null?void 0:a.style.transform;u.current&&(u.current.style.transform="scale(1) translate(0px, 0px)");const s=window.open("","_blank");s&&(s.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${(t==null?void 0:t.name)||"License"} - Print</title>
          <style>
            body {
              margin: 0;
              padding: 20px;
              font-family: Arial, sans-serif;
              background: white;
            }
            .print-header {
              text-align: center;
              margin-bottom: 30px;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
            }
            .print-header h1 {
              color: #333;
              margin: 0;
              font-size: 24px;
            }
            .print-header p {
              color: #666;
              margin: 5px 0;
            }
            .certification-image {
              max-width: 100%;
              height: auto;
              border: 1px solid #ddd;
              box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            }
            .print-footer {
              margin-top: 30px;
              text-align: center;
              font-size: 12px;
              color: #666;
              border-top: 1px solid #ddd;
              padding-top: 20px;
            }
            @media print {
              body { margin: 0; }
              .print-header, .print-footer { display: block; }
            }
          </style>
        </head>
        <body>
          <div class="print-header">
            <h1>${(t==null?void 0:t.name)||"License"} License</h1>
            <p>License Number: ${r.licenseNumber}</p>
            <p>NPN: ${r.npn}</p>
            <p>Issue Date: ${r.issueDate}</p>
            <p>Expiration Date: ${r.expirationDate}</p>
          </div>
          <img src="${(t==null?void 0:t.image)||""}" alt="${(t==null?void 0:t.name)||"License"} License" class="certification-image" />
          <div class="print-footer">
            <p>Printed on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</p>
            <p>Living Victorious Always™</p>
          </div>
        </body>
      </html>
    `),s.document.close(),s.onload=()=>{setTimeout(()=>{s.print(),s.close()},500)},setTimeout(()=>{u.current&&u.current&&n&&(u.current.style.transform=n)},1e3))},[t,r]),W=o.useCallback(async()=>{try{const n=document.createElement("canvas"),s=n.getContext("2d");if(!s)return;const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{n.width=a.width,n.height=a.height,s.drawImage(a,0,0),n.toBlob(c=>{if(!c)return;const h=URL.createObjectURL(c),l=document.createElement("a");l.href=h,l.download=`${(t==null?void 0:t.name)||"License"}_License_${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(h)},"image/png")},a.onerror=()=>{const c=document.createElement("a");c.href=(t==null?void 0:t.image)||"",c.download=`${(t==null?void 0:t.name)||"License"}_License_${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(c),c.click(),document.body.removeChild(c)},a.src=(t==null?void 0:t.image)||""}catch{const s=document.createElement("a");s.href=(t==null?void 0:t.image)||"",s.download=`${(t==null?void 0:t.name)||"License"}_License_${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}},[t]);return C?t?e.jsxs("div",{className:"certification-master-container",children:[e.jsxs("div",{className:"certification-master-sidebar",children:[I.length>1&&e.jsxs("div",{className:"certification-photo-gallery",children:[e.jsx("h3",{className:"gallery-title",children:"Photo Gallery"}),e.jsx("div",{className:"certification-gallery-thumbnails",children:e.jsx("div",{className:"certification-gallery-thumbnails-grid",children:I.map((n,s)=>e.jsxs("div",{className:`certification-gallery-thumbnail ${s===P?"active":""}`,onClick:()=>q(s),children:[e.jsx("img",{src:n.src,alt:n.caption,className:"certification-thumbnail-image"}),e.jsx("div",{className:"certification-thumbnail-caption",children:n.caption})]},s))})})]}),e.jsx("div",{className:"license-details-section",children:e.jsxs("div",{className:"license-details-container",children:[e.jsxs("div",{className:"license-header",children:[e.jsxs("h3",{className:"license-details-title",children:[t.name," License"]}),e.jsx("div",{className:"certification-status",children:t.status})]}),e.jsxs("div",{className:"license-details",children:[e.jsxs("div",{className:"license-info-row",children:[e.jsx("span",{className:"license-label",children:"License Type:"}),e.jsx("span",{className:"license-status",children:"Health Insurance"})]}),e.jsxs("div",{className:"license-info-row",children:[e.jsx("span",{className:"license-label",children:"License Number:"}),e.jsx("span",{className:"license-value",children:N.licenseNumber})]}),e.jsxs("div",{className:"license-info-row",children:[e.jsx("span",{className:"license-label",children:"NPN:"}),e.jsx("span",{className:"license-value",children:N.npn})]}),e.jsxs("div",{className:"license-info-row",children:[e.jsx("span",{className:"license-label",children:"Issue Date:"}),e.jsx("span",{className:"license-value",children:N.issueDate})]}),e.jsxs("div",{className:"license-info-row",children:[e.jsx("span",{className:"license-label",children:"Expiration Date:"}),e.jsx("span",{className:"license-value",children:N.expirationDate})]}),(t.flagIcon||t.flagImage)&&e.jsxs("div",{className:"license-info-row",children:[e.jsx("span",{className:"license-label",children:"State:"}),e.jsx("span",{className:"license-value",children:e.jsxs("div",{className:"state-flag-container",children:[t.flagImage&&e.jsx("img",{src:t.flagImage,alt:`${t.name} flag`,className:"state-flag-image"}),e.jsx("span",{className:"state-name",children:t.name})]})})]}),e.jsxs("div",{className:"certification-actions",children:[e.jsxs("button",{onClick:V,className:"action-btn print-btn",title:"Print License",children:[e.jsx("i",{className:"fas fa-print"}),e.jsx("span",{children:"Print"})]}),(t==null?void 0:t.pdfUrl)&&e.jsxs("a",{href:t.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"action-btn pdf-btn",title:"View PDF",children:[e.jsx("i",{className:"fas fa-file-pdf"}),e.jsx("span",{children:"PDF"})]}),e.jsxs("button",{onClick:W,className:"action-btn download-btn",title:"Download License",children:[e.jsx("i",{className:"fas fa-download"}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:G,className:"action-btn return-btn",title:"Return to previous page",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("span",{children:"Return"})]})]})]})]})})]}),e.jsx("div",{className:"certification-master-content",children:t&&t.image?e.jsx(e.Fragment,{children:e.jsxs("div",{ref:$,className:`certification-master-image-container ${i.isZoomed?"zoomed":""}`,onClick:A,onDoubleClick:O,onMouseDown:U,onTouchStart:H,children:[e.jsx("img",{ref:u,src:_.src,alt:`${t.name} License`,className:"certification-master-image",style:{width:"100%",height:"100%",objectFit:"contain",maxWidth:"90%",maxHeight:"90%",cursor:i.isZoomed?"grab":"zoom-in"}}),e.jsx("div",{className:"certification-master-zoom-indicator",children:e.jsx("span",{className:"zoom-text",children:i.isZoomed?`Drag to pan • ${Math.round(i.scale*100)}%`:"Click to zoom • Scroll to adjust"})}),e.jsx("div",{className:"certification-master-tap-to-zoom-message",children:e.jsx("span",{children:"tap to zoom"})})]})}):e.jsx("div",{className:"certification-master-image-container",children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-secondary)",fontSize:"1.1rem"},children:"No image available"})})})]}):e.jsx("div",{className:"certification-master-container",children:e.jsxs("div",{className:"certification-master-error",children:[e.jsx("h2",{children:"No certification selected"}),e.jsx("button",{onClick:()=>g(-1),className:"return-btn",children:"Go Back"})]})}):e.jsx("div",{className:"certification-master-container",children:e.jsx("div",{className:"certification-master-sidebar",children:e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:"Loading..."}),e.jsx("div",{className:"certification-status",children:"Loading..."})]})})})};function oe({}){return[{title:"Certification Details - Health Insurance Dave"},{name:"description",content:"View detailed certification information"}]}const ie=Q(function(){return e.jsx(te,{})});export{ie as default,oe as meta};
